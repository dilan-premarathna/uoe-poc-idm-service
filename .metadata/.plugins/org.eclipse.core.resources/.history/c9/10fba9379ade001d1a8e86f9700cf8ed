<?xml version="1.0" encoding="UTF-8"?>
<sequence name="Enrich-IDM-Payload-Sequence" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <property expression="json-eval($.id)" name="emp.id" scope="default" type="STRING"/>
    <property expression="json-eval($.name)" name="emp.name" scope="default" type="STRING"/>
    <property expression="json-eval($.age)" name="emp.age" scope="default" type="STRING"/>
    <property expression="json-eval($.address)" name="emp.address" scope="default" type="STRING"/>
    <property expression="json-eval($.salary)" name="emp.salary" scope="default" type="STRING"/>
    <property name="app.clientId" scope="default" type="STRING" value="93RGyQx0oKfF_lMC868igFPfBXca"/>
    <property name="app.clientSecret" scope="default" type="STRING" value="b2DZFQgVFB8Bz8GAL76dnqE82_8a"/>
    <sequence key="Choreo_Oracle_GetAccessToken_Sequenc"/>
    <property name="uri.var.host" scope="default" type="STRING" value="https://5ea3cd2c-5708-4489-bfc3-d82bd90520b2-dev.e1-us-east-azure.choreoapis.dev"/>
    <property name="context" scope="default" type="STRING" value="rxrp/oracle-api/endpoint-9090-803/1.0.0/salaries"/>
    <property expression="get-property('emp.id')" name="uri.var.emp.id" scope="default" type="STRING"/>
    <call>
        <endpoint>
            <http method="get" uri-template="{uri.var.host}/{uri.var.context}/{uri.var.emp.id}">
                <suspendOnFailure>
                    <initialDuration>-1</initialDuration>
                    <progressionFactor>1</progressionFactor>
                </suspendOnFailure>
                <markForSuspension>
                    <retriesBeforeSuspension>0</retriesBeforeSuspension>
                </markForSuspension>
            </http>
        </endpoint>
    </call>
    <payloadFactory media-type="json">
        <format>{Employee Id : $1,
           Address:$2,
           Department:$3,
           Salary:$4
           }</format>
        <args>
            <arg evaluator="json" expression="$.id"/>
            <arg evaluator="json" expression="$.address"/>
            <arg evaluator="json" expression="$.department"/>
            <arg evaluator="json" expression="$.salary"/>
        </args>
    </payloadFactory>
    <log level="full"/>
</sequence>
